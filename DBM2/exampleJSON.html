<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
	
	<script src="lib/jquery.dynatable.js"></script>
	<link rel="stylesheet" media="all" href="https://s3.amazonaws.com/dynatable-docs-assets/css/jquery.dynatable.css" />

<script>
$(document).ready(function(){
  initJSON();
});


function initJSON(){
	var $records = $('#json-records'),
    json = JSON.parse($records.text());
	
	var dynatable = $('#json-table')
	.bind('dynatable:init', function(e, dynatable) {
		dynatable.queries.functions['max-vyska'] = function(record, queryValue) {
			return parseFloat(record.vyskaCm) <= parseFloat(queryValue);
		};
	})
	.bind('dynatable:init', function(e, dynatable) {
		dynatable.queries.functions['min-vyska'] = function(record, queryValue) {
			return parseFloat(record.vyskaCm) >= parseFloat(queryValue);
		};
	})
	.dynatable({
		dataset: {
			records: json,
			perPageDefault: 5,
			perPageOptions: [5, 10, 20]
		},
		features: {
			paginate: true,
			search: false,
			recordCount: true,
			perPageSelect: true
		},
		writers: {
			_rowWriter: customWriter
		},
		inputs: {
			queries: $('#max-vyska,#min-vyska')
		}
	}).data('dynatable');
	
	$('#kategorieVek').change( function() {
		var value = $(this).val();
		if (value === "") {
			dynatable.queries.remove("kategorieVek");
		} else {
			dynatable.queries.add("kategorieVek",value);
		}
		dynatable.process();
	});
}

function customWriter(rowIndex, record, columns, cellWriter) {
	var out = '<tr><td>'+record.kategorieVek+'</td><td>';
	
	record.vyskaCm.forEach(function(item, index){
		out += item + '<br>';
	});
	out += '</td><td>';
	
	record.vyskaSds.forEach(function(item, index){
		out += item + '<br>';
	});
	out += '</td><td>';
	
	record.kolon.forEach(function(item, index){
		out += item + '<br>';
	});
	out += '</td></tr>';

	return out;
}
</script>
</head>


<body>

<div class = "container">

<h2>Table - JSON objects</h2>

<table id="json-table" class="table table-striped table-bordered" cellspacing="0" width="100%">
  <thead>
      <th>Kategorie Vek</th>
      <th>Vyska cm</th>
      <th>Vyska SDS</th>
	  <th>kolon</th>
  </thead>
  <tbody>
  </tbody>
</table>

<p>Kategorie
<select id="kategorieVek">
  <option></option>
  <option>A1a - 1 az 9 let</option>
  <option>A1b - 10 az 16 let</option>
</select></p>
<p>Max vyska <input id="max-vyska" type="text"></p>
<p>Min vyska <input id="min-vyska" type="text"></p>

<p style="margin-top:20px;">JSON:</p>
<p id="json-records">
[
  {
    "kategorieVek": "A1b - 10 az 16 let",
    "vyskaCm": ["159.0", "160"],
    "vyskaSds": ["-1.27", "-1.11"],
	"kolon": ["kryptove abcesy", "granulomy", "kryptitida"]
  },
  {
    "kategorieVek": "A1a - 1 az 9 let",
    "vyskaCm": ["132.0"],
    "vyskaSds": ["-1.27", "-1.11"],
	"kolon": []
  },
  {
    "kategorieVek": "A1b - 10 az 16 let",
    "vyskaCm": ["132.0"],
    "vyskaSds": ["-1.27", "-1.11"],
	"kolon": ["kryptove abcesy", "granulomy", "kryptitida"]
  },
  {
    "kategorieVek": "A1a - 1 az 9 let",
    "vyskaCm": ["159.0", "160"],
    "vyskaSds": ["-1.27", "-1.11"],
	"kolon": []
  },
  {
    "kategorieVek": "A1b - 10 az 16 let",
    "vyskaCm": ["159.0", "160"],
    "vyskaSds": ["-1.27", "-1.11"],
	"kolon": ["kryptove abcesy", "granulomy", "kryptitida"]
  },
  {
    "kategorieVek": "A1a - 1 az 9 let",
    "vyskaCm": ["159.0", "160"],
    "vyskaSds": ["-1.27", "-1.11"],
	"kolon": []
  },
  {
    "kategorieVek": "A1b - 10 az 16 let",
    "vyskaCm": ["159.0", "160"],
    "vyskaSds": ["-1.27", "-1.11"],
	"kolon": ["kryptove abcesy", "granulomy", "kryptitida"]
  },
  {
    "kategorieVek": "A1a - 1 az 9 let",
    "vyskaCm": ["159.0", "160"],
    "vyskaSds": ["-1.27", "-1.11"],
	"kolon": []
  },
  {
    "kategorieVek": "A1b - 10 az 16 let",
    "vyskaCm": ["159.0", "160"],
    "vyskaSds": ["-1.27", "-1.11"],
	"kolon": ["kryptove abcesy", "granulomy", "kryptitida"]
  },
  {
    "kategorieVek": "A1a - 1 az 9 let",
    "vyskaCm": ["159.0", "160"],
    "vyskaSds": ["-1.27", "-1.11"],
	"kolon": []
  },
  {
    "kategorieVek": "A1b - 10 az 16 let",
    "vyskaCm": ["159.0", "160"],
    "vyskaSds": ["-1.27", "-1.11"],
	"kolon": ["kryptove abcesy", "granulomy", "kryptitida"]
  },
  {
    "kategorieVek": "A1a - 1 az 9 let",
    "vyskaCm": ["159.0", "160"],
    "vyskaSds": ["-1.27", "-1.11"],
	"kolon": []
  }  
]
</p>

</div>

</body>
</html>